import{importShared as m}from"./__federation_fn_import-BEgTCs-s.js";import{j as t}from"./__federation_expose_BlogApp-DUVQIuLR.js";import{getPosts as k}from"./__federation_expose_PostsApi-BAiQHEzi.js";const{useEffect:f,useState:w}=await m("react"),{Link:x,useLocation:j,useNavigate:v}=await m("react-router-dom");function C(){const[h,b]=w([]),u=j(),y=v(),n=new URLSearchParams(u.search),s=n.get("q")?.toLowerCase()||"",r=parseInt(n.get("page")||"1",10),l=5;f(()=>{(async()=>{const e=await k();b(e)})()},[]);const d=h.filter(e=>e.title.toLowerCase().includes(s)||e.description.toLowerCase().includes(s)||e.tags?.some(a=>a.toLowerCase().includes(s))),o=Math.ceil(d.length/l),i=r*l,p=i-l,g=[...d].sort((e,a)=>new Date(a.createdAt).getTime()-new Date(e.createdAt).getTime()).slice(p,i),c=e=>{e>=1&&e<=o&&(n.set("page",e.toString()),y(`/posts?${n.toString()}`),window.scrollTo({top:0,behavior:"smooth"}))};return t.jsx("div",{className:"min-h-screen px-6 py-12",children:t.jsxs("div",{className:"max-w-3xl mx-auto",children:[t.jsx("h1",{className:"text-3xl font-bold mb-8",children:s?`Search results for "${s}"`:"Latest Blogs"}),g.length===0?t.jsx("p",{className:"text-gray-500",children:"No posts found."}):t.jsx("div",{className:"space-y-10",children:g.map(e=>t.jsxs("article",{className:"border-b border-gray-200 dark:border-gray-800 pb-6",children:[t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:new Date(e.createdAt).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})}),t.jsx(x,{to:`/post/${e.id}`,children:t.jsx("h2",{className:"text-xl font-semibold hover:text-blue-500 dark:hover:text-blue-400 transition",children:e.title})}),t.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300 line-clamp-3",children:e.description}),t.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:e.tags?.map(a=>t.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:a},a))}),t.jsx(x,{to:`/post/${e.id}`,className:"mt-3 inline-block text-sm text-primary hover:underline",children:"Read more â†’"})]},e.id))}),o>1&&t.jsxs("div",{className:"flex justify-center items-center gap-2 mt-10",children:[t.jsx("button",{onClick:()=>c(r-1),disabled:r===1,className:`px-3 py-1 rounded-md text-sm ${r===1?"bg-gray-200 text-gray-500 cursor-not-allowed dark:bg-gray-700 dark:text-gray-400":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"Prev"}),Array.from({length:o},(e,a)=>a+1).map(e=>t.jsx("button",{onClick:()=>c(e),className:`px-3 py-1 rounded-md text-sm ${r===e?"bg-blue-500 dark:bg-purple-600 text-white hover:bg-blue-600 dark:hover:bg-purple-700":"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:e},e)),t.jsx("button",{onClick:()=>c(r+1),disabled:r===o,className:`px-3 py-1 rounded-md text-sm ${r===o?"bg-gray-200 text-gray-500 cursor-not-allowed dark:bg-gray-700 dark:text-gray-400":"bg-blue-500 dark:bg-purple-600 text-white hover:bg-blue-600 dark:hover:bg-purple-700"}`,children:"Next"})]})]})})}export{C as default};
